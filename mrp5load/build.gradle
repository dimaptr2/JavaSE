/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */

plugins {
    id 'java'
    id 'idea'
    id 'application'
    id 'com.github.johnrengelman.shadow' version '5.2.0'
}

group 'ru.velkomfood.mm.mrp'
version '11.6.4'

// Create an executable file
application {
    mainClassName = "${project.group}.uploader.Launcher"
}

// Path to the external libraries and its dependency file tree
def sapJavaConnector = '/usr/sap/JCo'
def sapLibTree = fileTree(dir: sapJavaConnector, includes: ['sapjco3.jar'])
// Versions of dependencies
def slf4jVersion = '1.7.30'
def mariadbClientVersion = '2.6.0'

// Java Version compatibility features
sourceCompatibility = '11'
targetCompatibility = '11'

repositories {
    mavenCentral()
    jcenter()
}

dependencies {
    compileOnly(sapLibTree)
    // General logger
    implementation("org.slf4j:slf4j-simple:$slf4jVersion")
    // Mariadb Client
    implementation("org.mariadb.jdbc:mariadb-java-client:$mariadbClientVersion")
    // For testing
    testImplementation(sapLibTree)
}

// Create a fat, jar file (with all dependencies)
// Shadow Plugin will be using the Application plugin with attributes automatically.
shadowJar {
    manifest {
        attributes('Implementation-Title' : 'MRP Data Uploader')
        attributes('Implementation-Version' : project.version)
        attributes('Class-Path' : "${sapJavaConnector}/sapjco3.jar")
    }
}
